# -*- ii: enabled; -*-
* aws / eksctl cli
** install
   #+begin_src tmate
     brew tap weaveworks/tap
     brew install weaveworks/tap/eksctl
   #+end_src
** eksctl
*** help
    #+begin_src shell
      eksctl help
    #+end_src

    #+RESULTS:
    #+begin_example
    The official CLI for Amazon EKS

    Usage: eksctl [command] [flags]

    Commands:
      eksctl create                  Create resource(s)
      eksctl get                     Get resource(s)
      eksctl update                  Update resource(s)
      eksctl upgrade                 Upgrade resource(s)
      eksctl delete                  Delete resource(s)
      eksctl set                     Set values
      eksctl unset                   Unset values
      eksctl scale                   Scale resources(s)
      eksctl drain                   Drain resource(s)
      eksctl utils                   Various utils
      eksctl completion              Generates shell completion scripts
      eksctl version                 Output the version of eksctl
      eksctl help                    Help about any command

    Common flags:
      -C, --color string   toggle colorized logs (valid options: true, false, fabulous) (default "true")
      -h, --help           help for this command
      -v, --verbose int    set log level, use 0 to silence, 4 for debugging and 5 for debugging with AWS debug logging (default 3)

    Use 'eksctl [command] --help' for more information about a command.

    #+end_example

*** get clusters
    #+begin_src shell
      eksctl get clusters
    #+end_src

    #+RESULTS:
    #+begin_example
    NAME				REGION
    exciting-mongoose-1584470894	us-east-1
    #+end_example

*** delete cluster
    #+begin_src tmate
      eksctl delete cluster exciting-mongoose-1584470894
    #+end_src

    #+RESULTS:
    #+begin_example
    NAME				REGION
    exciting-mongoose-1584470894	us-east-1
    #+end_example

** aws
   #+begin_src shell
     aws list-clusters
   #+end_src


   #+RESULTS:

* Move Site
** dns records
*** apisnoop.cncf.io CNAMEs to apisnoop.ii.coop
#+name: apisnoop.cncf.io dns CNAMEs to IP
#+begin_src shell
  dig apisnoop.cncf.io | grep -v \; | sed '/^\s*$/d'
#+end_src

#+RESULTS: apisnoop.cncf.io dns CNAMEs to IP
#+begin_src shell
apisnoop.cncf.io.	115	IN	CNAME	apisnoop.ii.coop.
apisnoop.ii.coop.	25	IN	CNAME	apisnoop.cncf.ci.
apisnoop.cncf.ci.	25	IN	CNAME	www.apisnoop.io.
www.apisnoop.io.	116	IN	A	35.189.36.228
#+end_src
*** apisnoop.ii.coop CNAMEs to apisnoop.cncf.ci
#+name: apisnoop.ii.coop dns CNAMEs to IP
#+begin_src shell
  dig apisnoop.ii.coop | grep -v \; | sed '/^\s*$/d'
#+end_src

#+RESULTS: apisnoop.ii.coop dns CNAMEs to IP
#+begin_src shell
apisnoop.ii.coop.	59	IN	CNAME	apisnoop.cncf.ci.
apisnoop.cncf.ci.	59	IN	CNAME	www.apisnoop.io.
www.apisnoop.io.	299	IN	A	35.189.36.228
#+end_src

*** apisnoop.cncf.ci CNAMEs to www.apisnoop.io
#+name: apisnoop.cncf.ci dns CNAMEs to IP
#+begin_src shell
  dig apisnoop.cncf.ci | grep -v \; | sed '/^\s*$/d'
#+end_src

#+RESULTS: apisnoop.cncf.ci dns CNAMEs to IP
#+begin_src shell
apisnoop.cncf.ci.	59	IN	CNAME	www.apisnoop.io.
www.apisnoop.io.	299	IN	A	35.189.36.228
#+end_src

*** www.apisnoop.io A to 35.189.36.228
#+name: www.apisnoop.io dns CNAMEs to IP
#+begin_src shell
  dig www.apisnoop.io | grep -v \; | sed '/^\s*$/d'
#+end_src

#+RESULTS: www.apisnoop.io dns CNAMEs to IP
#+begin_src shell
www.apisnoop.io.	299	IN	A	35.189.36.228
#+end_src

#+RESULTS: apisnoop.cncf.ci dns CNAMEs to IP
#+begin_src shell
apisnoop.cncf.ci.	59	IN	CNAME	www.apisnoop.io.
www.apisnoop.io.	299	IN	A	35.189.36.228
#+end_src

** dns domains IPs
*** dns servers for cncf.io
#+name: cncf.io registrar
#+begin_src shell
  whois cncf.io | grep Name\ Server:
#+end_src

#+RESULTS: cncf.io registrar
#+begin_src shell
Name Server: NS2.DNSIMPLE.COM
Name Server: NS1.DNSIMPLE.COM
Name Server: NS3.DNSIMPLE.COM
Name Server: NS4.DNSIMPLE.COM
#+end_src

*** dns servers for ii.coop
#+name: ii.coop registrar
#+begin_src shell
  whois ii.coop | grep Name\ Server:
#+end_src

#+RESULTS: ii.coop registrar
#+begin_src shell
Name Server: NS4.DNSIMPLE.COM
Name Server: NS3.DNSIMPLE.COM
Name Server: NS2.DNSIMPLE.COM
Name Server: NS1.DNSIMPLE.COM
Name Server: ns4.dnsimple.com
Name Server: ns3.dnsimple.com
Name Server: ns2.dnsimple.com
Name Server: ns1.dnsimple.com
#+end_src

*** dns servers for cncf.ci
#+name: cncf.ci registrar
#+begin_src shell
  whois cncf.ci | grep Name\ Server:
#+end_src

#+RESULTS: cncf.ci registrar
#+begin_src shell
Name Server: ns1.dnsimple.com
Name Server: ns2.dnsimple.com
Name Server: ns3.dnsimple.com
Name Server: ns4.dnsimple.com
#+end_src

*** dns servers for apisnoop.io
#+name: apisnoop.io registrar
#+begin_src shell
  whois apisnoop.io | grep Name\ Server:
#+end_src

#+RESULTS: apisnoop.io registrar
#+begin_src shell
Name Server: NS-1646.AWSDNS-13.CO.UK
Name Server: NS-424.AWSDNS-53.COM
Name Server: NS-878.AWSDNS-45.NET
Name Server: NS-1407.AWSDNS-47.ORG
#+end_src
** Debugging
   #+name: services currently hosted by google
   #+begin_src shell
      whois 35.189.36.228 | grep -i organization
   #+end_src

   #+RESULTS: services currently hosted by google
   #+begin_src shell
   Organization:   Google LLC (GOOGL-2)
   #+end_src
